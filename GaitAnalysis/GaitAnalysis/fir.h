#pragma once

#include <stdio.h>
#include <stdint.h>
//////////////////////////////////////////////////////////////
//  Filter Code Definitions
//////////////////////////////////////////////////////////////

// maximum number of inputs that can be handled
// in one function call
#define MAX_INPUT_LEN   100
// maximum length of filter than can be handled
#define MAX_FLT_LEN     31
// buffer to hold all of the input samples
#define FILTER_LEN  31
#define BUFFER_LEN      (MAX_FLT_LEN - 1 + MAX_INPUT_LEN)  //63-1+80  142


class fir
{
public:
	fir();
	~fir();

	void firFloatInit(void);
	void intToFloat(int16_t *input, double *output, int length);
	void floatToInt(double *input, int16_t *output, int length);
	void firFloat(double *coeffs, double *input, double *output,
		int length, int filterLength);

	double insamp[BUFFER_LEN];
	/*
	double coeffs[FILTER_LEN] =
	{
		0.009140502661,-1.465269557e-17,-0.009847287089,-0.006326611154, 0.006584285293,
		0.01110123377,-1.491541144e-17, -0.01210396085,-0.007829490118, 0.008209018037,
		0.01395331882,-1.51321096e-17,  -0.0155011043, -0.01013632864,  0.01075653452,
		0.0185310822,-1.530174615e-17,  -0.0212592613, -0.01417389326,  0.01537940465,
		0.02718619816,-1.542350217e-17, -0.03331179172, -0.02318620495,  0.02652365156,
		0.05010999739,-1.549679202e-17, -0.07525996864, -0.06204502657,  0.09309690446,
		0.3013249338,   0.3981676996,   0.3013249338,  0.09309690446, -0.06204502657,
		-0.07525996864,-1.549679202e-17,  0.05010999739,  0.02652365156, -0.02318620495,
		-0.03331179172,-1.542350217e-17,  0.02718619816,  0.01537940465, -0.01417389326,
		-0.0212592613,-1.530174615e-17,   0.0185310822,  0.01075653452, -0.01013632864,
		-0.0155011043,-1.51321096e-17,  0.01395331882, 0.008209018037,-0.007829490118,
		-0.01210396085,-1.491541144e-17,  0.01110123377, 0.006584285293,-0.006326611154,
		-0.009847287089,-1.465269557e-17, 0.009140502661
	};
	*/
	
	double coeffs[FILTER_LEN] =
	{
		-0.001700396903674,1.758030058129e-18, 0.002937331570891,-3.276871614433e-18,
		-0.006730091366404,6.051933223714e-18,  0.01409388790399,-9.603381523083e-18,
		-0.02678503582005,1.331713883769e-17,  0.04909896059358,-1.65510627894e-17,
		-0.0969383327763, 1.87459785477e-17,   0.3156195633245,    0.500808226947,
		0.3156195633245, 1.87459785477e-17,  -0.0969383327763,-1.65510627894e-17,
		0.04909896059358,1.331713883769e-17, -0.02678503582005,-9.603381523083e-18,
		0.01409388790399,6.051933223714e-18,-0.006730091366404,-3.276871614433e-18,
		0.002937331570891,1.758030058129e-18,-0.001700396903674
	};
};

